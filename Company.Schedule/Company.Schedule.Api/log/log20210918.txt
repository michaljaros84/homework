2021-09-18 14:16:25.304 +02:00 [INF] App starting
2021-09-18 14:16:26.316 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2021-09-18 14:16:26.318 +02:00 [INF] Hosting environment: Development
2021-09-18 14:16:26.319 +02:00 [INF] Content root path: C:\Repo\Company.Schedule\Company.Schedule.Api
2021-09-18 14:16:26.335 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/swagger - -
2021-09-18 14:16:26.398 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/swagger/index.html - -
2021-09-18 14:16:26.403 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/swagger - - - 301 - - 69.4775ms
2021-09-18 14:16:26.487 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/swagger/index.html - - - 200 - text/html;charset=utf-8 88.6403ms
2021-09-18 14:16:26.487 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/swagger/swagger-ui.css - -
2021-09-18 14:16:26.487 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/_framework/aspnetcore-browser-refresh.js - -
2021-09-18 14:16:26.488 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/swagger/swagger-ui-bundle.js - -
2021-09-18 14:16:26.490 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/swagger/swagger-ui-standalone-preset.js - -
2021-09-18 14:16:26.498 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/_framework/aspnetcore-browser-refresh.js - - - 200 7931 application/javascript;+charset=utf-8 8.5852ms
2021-09-18 14:16:26.517 +02:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2021-09-18 14:16:26.517 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2021-09-18 14:16:26.517 +02:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2021-09-18 14:16:26.520 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/swagger/swagger-ui.css - - - 200 142933 text/css 32.8001ms
2021-09-18 14:16:26.535 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/swagger/swagger-ui-standalone-preset.js - - - 200 311804 application/javascript 45.1172ms
2021-09-18 14:16:26.539 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/swagger/swagger-ui-bundle.js - - - 200 986342 application/javascript 51.0393ms
2021-09-18 14:16:26.884 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/swagger/v1/swagger.json - -
2021-09-18 14:16:27.017 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 133.4285ms
2021-09-18 14:16:38.465 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/AAD7A630-AF1C-4952-9CB4-44B8B847853B - -
2021-09-18 14:16:38.494 +02:00 [INF] Executing endpoint 'Company.Schedule.Api.Controllers.CompanyScheduleController.GetCountrySchedule (Company.Schedule.Api)'
2021-09-18 14:16:38.527 +02:00 [INF] Route matched with {action = "GetCountrySchedule", controller = "CompanySchedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountrySchedule(System.Guid) on controller Company.Schedule.Api.Controllers.CompanyScheduleController (Company.Schedule.Api).
2021-09-18 14:16:44.288 +02:00 [INF] Entity Framework Core 5.0.10 initialized 'CompanyScheduleContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-09-18 14:16:44.556 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-09-18 14:16:45.030 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyNumber], [t].[CompanyType], [t].[MarketId], [t].[Name], [t].[Id0], [t].[Large], [t].[Medium], [t].[Name0], [t].[Small], [m0].[Id], [m0].[DaysOffset], [m0].[MarketId], [s].[Id], [s].[CompanyEntityId], [s].[Date]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CompanyNumber], [c].[CompanyType], [c].[MarketId], [c].[Name], [m].[Id] AS [Id0], [m].[Large], [m].[Medium], [m].[Name] AS [Name0], [m].[Small]
    FROM [Companies] AS [c]
    LEFT JOIN [Markets] AS [m] ON [c].[MarketId] = [m].[Id]
    WHERE [c].[Id] = @__companyId_0
) AS [t]
LEFT JOIN [MarketDays] AS [m0] ON [t].[Id0] = [m0].[MarketId]
LEFT JOIN [ScheduledDates] AS [s] ON [t].[Id] = [s].[CompanyEntityId]
ORDER BY [t].[Id], [t].[Id0], [m0].[Id], [s].[Id]
2021-09-18 14:16:45.144 +02:00 [INF] Executing OkObjectResult, writing value of type 'Company.Schedule.Services.Domain.DTO.ScheduleResultDto'.
2021-09-18 14:16:45.156 +02:00 [INF] Executed action Company.Schedule.Api.Controllers.CompanyScheduleController.GetCountrySchedule (Company.Schedule.Api) in 6623.8399ms
2021-09-18 14:16:45.157 +02:00 [INF] Executed endpoint 'Company.Schedule.Api.Controllers.CompanyScheduleController.GetCountrySchedule (Company.Schedule.Api)'
2021-09-18 14:16:45.157 +02:00 [INF] Request GET /AAD7A630-AF1C-4952-9CB4-44B8B847853B => 200
2021-09-18 14:16:45.161 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/AAD7A630-AF1C-4952-9CB4-44B8B847853B - - - 200 - application/json;+charset=utf-8 6696.5354ms
2021-09-18 14:17:33.284 +02:00 [INF] App starting
2021-09-18 14:17:34.563 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2021-09-18 14:17:34.565 +02:00 [INF] Hosting environment: Development
2021-09-18 14:17:34.566 +02:00 [INF] Content root path: C:\Repo\Company.Schedule\Company.Schedule.Api
2021-09-18 14:17:34.584 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/swagger/index.html - -
2021-09-18 14:17:34.722 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/swagger/index.html - - - 200 - text/html;charset=utf-8 140.5131ms
2021-09-18 14:17:34.736 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/_framework/aspnetcore-browser-refresh.js - -
2021-09-18 14:17:34.754 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/_framework/aspnetcore-browser-refresh.js - - - 200 7931 application/javascript;+charset=utf-8 17.5611ms
2021-09-18 14:17:34.907 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/swagger/v1/swagger.json - -
2021-09-18 14:17:35.016 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 108.6617ms
2021-09-18 14:17:56.133 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44398/insert?Id=AAD7A630-AF1C-4952-9CB4-44B8B847853B&Name=last%20test&CompanyNumber=23546543&CompanyType=small&MarketName=Denmark&StartDate=2021-09-21 - 0
2021-09-18 14:17:56.163 +02:00 [INF] Executing endpoint 'Company.Schedule.Api.Controllers.CompanyScheduleController.InsertCountrySchedule (Company.Schedule.Api)'
2021-09-18 14:17:56.198 +02:00 [INF] Route matched with {action = "InsertCountrySchedule", controller = "CompanySchedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] InsertCountrySchedule(Company.Schedule.Services.Domain.DTO.CompanyDto) on controller Company.Schedule.Api.Controllers.CompanyScheduleController (Company.Schedule.Api).
2021-09-18 14:18:07.322 +02:00 [INF] Entity Framework Core 5.0.10 initialized 'CompanyScheduleContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-09-18 14:18:07.578 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-09-18 14:18:08.050 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyNumber], [t].[CompanyType], [t].[MarketId], [t].[Name], [t].[Id0], [t].[Large], [t].[Medium], [t].[Name0], [t].[Small], [m0].[Id], [m0].[DaysOffset], [m0].[MarketId], [s].[Id], [s].[CompanyEntityId], [s].[Date]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CompanyNumber], [c].[CompanyType], [c].[MarketId], [c].[Name], [m].[Id] AS [Id0], [m].[Large], [m].[Medium], [m].[Name] AS [Name0], [m].[Small]
    FROM [Companies] AS [c]
    LEFT JOIN [Markets] AS [m] ON [c].[MarketId] = [m].[Id]
    WHERE [c].[Id] = @__companyId_0
) AS [t]
LEFT JOIN [MarketDays] AS [m0] ON [t].[Id0] = [m0].[MarketId]
LEFT JOIN [ScheduledDates] AS [s] ON [t].[Id] = [s].[CompanyEntityId]
ORDER BY [t].[Id], [t].[Id0], [m0].[Id], [s].[Id]
2021-09-18 14:18:09.786 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (Size = 100), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Guid), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Companies] SET [CompanyNumber] = @p0, [Name] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;

DECLARE @inserted1 TABLE ([Id] bigint, [_Position] [int]);
MERGE [ScheduledDates] USING (
VALUES (@p3, @p4, 0),
(@p5, @p6, 1),
(@p7, @p8, 2),
(@p9, @p10, 3),
(@p11, @p12, 4)) AS i ([CompanyEntityId], [Date], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CompanyEntityId], [Date])
VALUES (i.[CompanyEntityId], i.[Date])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted1;

SELECT [t].[Id] FROM [ScheduledDates] t
INNER JOIN @inserted1 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];
2021-09-18 14:18:09.830 +02:00 [INF] Executing OkObjectResult, writing value of type 'Company.Schedule.Services.Domain.DTO.ScheduleResultDto'.
2021-09-18 14:18:09.844 +02:00 [INF] Executed action Company.Schedule.Api.Controllers.CompanyScheduleController.InsertCountrySchedule (Company.Schedule.Api) in 13641.3322ms
2021-09-18 14:18:09.845 +02:00 [INF] Executed endpoint 'Company.Schedule.Api.Controllers.CompanyScheduleController.InsertCountrySchedule (Company.Schedule.Api)'
2021-09-18 14:18:09.845 +02:00 [INF] Request POST /insert => 200
2021-09-18 14:18:09.851 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44398/insert?Id=AAD7A630-AF1C-4952-9CB4-44B8B847853B&Name=last%20test&CompanyNumber=23546543&CompanyType=small&MarketName=Denmark&StartDate=2021-09-21 - 0 - 200 - application/json;+charset=utf-8 13718.0531ms
2021-09-18 14:18:21.473 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44398/AAD7A630-AF1C-4952-9CB4-44B8B847853B - -
2021-09-18 14:18:21.475 +02:00 [INF] Executing endpoint 'Company.Schedule.Api.Controllers.CompanyScheduleController.GetCountrySchedule (Company.Schedule.Api)'
2021-09-18 14:18:21.479 +02:00 [INF] Route matched with {action = "GetCountrySchedule", controller = "CompanySchedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountrySchedule(System.Guid) on controller Company.Schedule.Api.Controllers.CompanyScheduleController (Company.Schedule.Api).
2021-09-18 14:18:22.894 +02:00 [INF] Entity Framework Core 5.0.10 initialized 'CompanyScheduleContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-09-18 14:18:22.901 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyNumber], [t].[CompanyType], [t].[MarketId], [t].[Name], [t].[Id0], [t].[Large], [t].[Medium], [t].[Name0], [t].[Small], [m0].[Id], [m0].[DaysOffset], [m0].[MarketId], [s].[Id], [s].[CompanyEntityId], [s].[Date]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CompanyNumber], [c].[CompanyType], [c].[MarketId], [c].[Name], [m].[Id] AS [Id0], [m].[Large], [m].[Medium], [m].[Name] AS [Name0], [m].[Small]
    FROM [Companies] AS [c]
    LEFT JOIN [Markets] AS [m] ON [c].[MarketId] = [m].[Id]
    WHERE [c].[Id] = @__companyId_0
) AS [t]
LEFT JOIN [MarketDays] AS [m0] ON [t].[Id0] = [m0].[MarketId]
LEFT JOIN [ScheduledDates] AS [s] ON [t].[Id] = [s].[CompanyEntityId]
ORDER BY [t].[Id], [t].[Id0], [m0].[Id], [s].[Id]
2021-09-18 14:18:22.904 +02:00 [INF] Executing OkObjectResult, writing value of type 'Company.Schedule.Services.Domain.DTO.ScheduleResultDto'.
2021-09-18 14:18:22.904 +02:00 [INF] Executed action Company.Schedule.Api.Controllers.CompanyScheduleController.GetCountrySchedule (Company.Schedule.Api) in 1425.0838ms
2021-09-18 14:18:22.905 +02:00 [INF] Executed endpoint 'Company.Schedule.Api.Controllers.CompanyScheduleController.GetCountrySchedule (Company.Schedule.Api)'
2021-09-18 14:18:22.905 +02:00 [INF] Request GET /AAD7A630-AF1C-4952-9CB4-44B8B847853B => 200
2021-09-18 14:18:22.905 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44398/AAD7A630-AF1C-4952-9CB4-44B8B847853B - - - 200 - application/json;+charset=utf-8 1432.1495ms
